# Библиотека компонентов для KiCad
Данная библиотека используется автором для работы, постоянно пополняется новыми компонентами. Посадочные места для компонентов выполнены в полном соответствии с группой стандартов IPC. 

![image-20200629154611351](Design/image-20200629154611351.png)

Mainline: `KiCad 6`

Структура библиотеки:

- `*.kicad_sym` - библиотека УГО компонентов
- `MAS_Package_std.pretty` - посадочные места для стандартных корпусов. Например, LQFP-48 и подобные
- `MAS_Package_nostd.pretty` - посадочные места для нестандартных компонентов, например, ZMPT107-1

## Установка:

Скачайте архив или клонируем репозиторий на локальный диск:

~~~ bash
git clone https://github.com/MuratovAS/KiCadLibrary
~~~

Для установки библиотеки откройте KiCad и перейдите в подпункт настроек:

![image-20200408113336852](Design/image-20200408113336852.png)

Жмакаем на указанные кнопки и добавляем все файлы `*.kicad_sym`.

![image-20200408113627903](Design/image-20200408113627903.png)

Подобную операцию проворачиваем для библиотеки посадочных мест, только нашей целью будут каталоги `MAS_Package_std.pretty`, `MAS_Package_nostd.pretty`.

![image-20200408114157799](Design/image-20200408114157799.png)

В заключение подключим 3D модули. 
Создаем переменную `MAS_3DMODEL_DIR`, пропишем путь к каталоку `MAS_3DModel`.

![image-20200408120332398](Design/image-20200408120332398.png)

# Подготовка к производству (jlcpcb)

## Gerber

Стандартная конфигурации:

![image-20200629163025639](Design/image-20200629163025639.png)

- `Cu` - слой меди

- `Paste` - слой трафарета для нанесения паяльной пасты 

- `SilkS` - слои шелкография 

- `Mask` - слой маски 

- `Edge` - контур платы и фрезеровка 

## Drill Files

Стандартная конфигурации:

![image-20200629163720507](Design/image-20200629163720507.png)

В результате получаем 2 файла сверловки для металлизированных и не металлизированных отверстий

## BOM

Пример правильно оформленного BOM

![img](Design/FjrqlNe.png)

Обязательные столбцы:

- **Comment**
- **Designator**
- **Footprint**
- **LCSC part number**

Для более удобного экспорта, необходимо подключить шаблон

![image-20200629165741140](Design/image-20200629165741140.png)

![image-20200629165521541](Design/image-20200629165521541.png)

~~~bash
xsltproc -o "%O.csv" "ВАШПУТЬ/KiCadLibrary/Templates/bom2grouped_csv_jlcpcb.xsl" "%I"
~~~

## Pick and Place files

Файл CPL должен быть с генерированый из редактора печатной платы, щелкните Файл -> Файлы для производства -> Файл позиций посадочных мест (.pos) и экспортируйте файл со следующими настройками.

![image-20200629170337778](Design/image-20200629170337778.png)

Затем переименовать столбцы:

- **Ref** -> **Designator** 
- **PosX** -> **Mid X**
- **PosY** -> **Mid Y**
- **Rot** -> **Rotation** 
- **Side** -> **Layer**

~~~bash
sed -i 's/Ref/Designator/g' *.csv
sed -i 's/PosX/Mid X/g' *.csv
sed -i 's/PosY/Mid Y/g' *.csv
sed -i 's/Rot/Rotation/g' *.csv
sed -i 's/Side/Layer/g' *.csv
~~~

Пример результирующего файла:

<img src="Design/JpazXtn.png" alt="img" style="zoom: 33%;" />

TODO:
- [ ] исправить модель UDFN14_5
- [ ] исправить модель NLC453232T